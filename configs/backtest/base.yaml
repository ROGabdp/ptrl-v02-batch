version: 1

# ─── 回測區間與資金 ──────────────────────────────────────────────────
backtest:
  start: "2017-10-16"
  end: "2023-10-15"
  initial_cash: 2400
  yearly_contribution: 2400
  benchmark: "^IXIC"
  tickers:
    - GOOGL
    - NVDA
    - TSM

# ─── 模型來源 ────────────────────────────────────────────────────────
model:
  registry_best_path: reports/registry/registry_best_by_ticker.csv
  mode: finetune          # finetune | base

# ─── 資料 ────────────────────────────────────────────────────────────
data:
  provider: yfinance
  auto_update: true
  data_root: scripts/legacy/data/stocks
  download_start: "2000-01-01"

# ─── 全域策略預設 ────────────────────────────────────────────────────
strategy:
  entry:
    conf_thresholds:
      - { min_conf: 0.95, buy_frac: 0.25 }
      - { min_conf: 0.90, buy_frac: 0.15 }
    use_market_filter: true
    min_days_between_entries: 0
  exit:
    stop_loss_pct: 0.08
    take_profit_activation_pct: 0.20
    trail_stop_low_pct: 0.08
    trail_stop_high_pct: 0.17
    high_profit_threshold_pct: 0.25

# ─── 個股策略覆寫（深層 merge 到 strategy 上）─────────────────────
per_ticker:
  NVDA:
    exit:
      stop_loss_pct: 0.08
  GOOGL:
    exit:
      stop_loss_pct: 0.08
  TSM:
    exit:
      stop_loss_pct: 0.10
